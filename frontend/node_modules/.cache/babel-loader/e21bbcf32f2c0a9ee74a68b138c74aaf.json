{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React from 'react';\nexport default function useFunctionalityAuthentication() {\n  _s();\n\n  const onLogin = React.useCallback(async form => {\n    // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\n    // btnLoading.start?.();\n    let apiUrl = \"http://localhost:3333/auth/signin\";\n\n    try {\n      const res = await axios.post(apiUrl, form);\n\n      if (res.status === 200) {\n        if (res.data.access_token) {// StorageAuth.AccessToken = res.data.data.token;\n          // batch(() => {\n          //     dispatch(ActionAuth.SetIsLoggedIn(true));\n          //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\n          //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\n          //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\n          // });\n          // if (!!data.previousPath) history.push(data.previousPath);\n        } else {// toast.error(res.data.message);\n        }\n      }\n    } catch (e) {\n      // setErrMsg((e as Error).message);\n      // toast.error(e.message);\n      console.log(\"error\", e);\n    } // btnLoading.stop?.();\n\n\n    return Promise.resolve(null);\n  }, []);\n  const onSignUp = React.useCallback(async form => {\n    // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\n    // btnLoading.start?.();\n    let apiUrl = \"http://localhost:3333/auth/signup\";\n\n    try {\n      const res = await axios.post(apiUrl, form);\n\n      if (res.status === 201) {\n        if (res.data.access_token) {// StorageAuth.AccessToken = res.data.data.token;\n          // batch(() => {\n          //     dispatch(ActionAuth.SetIsLoggedIn(true));\n          //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\n          //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\n          //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\n          // });\n          // if (!!data.previousPath) history.push(data.previousPath);\n        } else {// toast.error(res.data.message);\n        }\n      }\n    } catch (e) {\n      // setErrMsg((e as Error).message);\n      // toast.error(e.message);\n      console.log(\"error\", e);\n    } // btnLoading.stop?.();\n\n\n    return Promise.resolve(null);\n  }, []);\n  return {\n    onLogin,\n    onSignUp\n  };\n}\n\n_s(useFunctionalityAuthentication, \"WU6zbh/KjvTOvUIidhrR3F5X8QI=\");","map":{"version":3,"names":["axios","React","useFunctionalityAuthentication","onLogin","useCallback","form","apiUrl","res","post","status","data","access_token","e","console","log","Promise","resolve","onSignUp"],"sources":["C:/Users/USER/AbabaTask/frontend/src/hooks/functionalityAuthentication.tsx"],"sourcesContent":["import axios from 'axios';\r\nimport React from 'react'\r\nimport { ApiLoginResponse, loginSchema } from '../Features/Login/login';\r\n\r\nexport default function useFunctionalityAuthentication() {\r\n\r\n    const onLogin = React.useCallback(\r\n        async (form: loginSchema): Promise<null> => {\r\n            // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\r\n            // btnLoading.start?.();\r\n            let apiUrl = \"http://localhost:3333/auth/signin\"\r\n\r\n            try {\r\n                const res = await axios.post<ApiLoginResponse>(\r\n                    apiUrl,\r\n                    form\r\n                );\r\n\r\n                if (res.status === 200) {\r\n                    if (res.data.access_token) {\r\n                        // StorageAuth.AccessToken = res.data.data.token;\r\n                        // batch(() => {\r\n                        //     dispatch(ActionAuth.SetIsLoggedIn(true));\r\n                        //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\r\n                        //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\r\n                        //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\r\n                        // });\r\n\r\n                        // if (!!data.previousPath) history.push(data.previousPath);\r\n                    }\r\n                    else {\r\n                        // toast.error(res.data.message);\r\n                    }\r\n                }\r\n            } catch (e: any) {\r\n                // setErrMsg((e as Error).message);\r\n                // toast.error(e.message);\r\n                console.log(\"error\", e)\r\n            }\r\n            // btnLoading.stop?.();\r\n            return Promise.resolve(null);\r\n        },\r\n        []\r\n    );\r\n\r\n\r\n    const onSignUp = React.useCallback(\r\n        async (form: loginSchema): Promise<null> => {\r\n            // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\r\n            // btnLoading.start?.();\r\n            let apiUrl = \"http://localhost:3333/auth/signup\"\r\n\r\n            try {\r\n                const res = await axios.post<ApiLoginResponse>(\r\n                    apiUrl,\r\n                    form\r\n                );\r\n\r\n                if (res.status === 201) {\r\n                    if (res.data.access_token) {\r\n                        // StorageAuth.AccessToken = res.data.data.token;\r\n                        // batch(() => {\r\n                        //     dispatch(ActionAuth.SetIsLoggedIn(true));\r\n                        //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\r\n                        //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\r\n                        //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\r\n                        // });\r\n\r\n                        // if (!!data.previousPath) history.push(data.previousPath);\r\n                    }\r\n                    else {\r\n                        // toast.error(res.data.message);\r\n                    }\r\n                }\r\n            } catch (e: any) {\r\n                // setErrMsg((e as Error).message);\r\n                // toast.error(e.message);\r\n                console.log(\"error\", e)\r\n            }\r\n            // btnLoading.stop?.();\r\n            return Promise.resolve(null);\r\n        },\r\n        []\r\n    );\r\n\r\n    return {\r\n        onLogin,\r\n        onSignUp,\r\n\r\n    }\r\n\r\n\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,eAAe,SAASC,8BAAT,GAA0C;EAAA;;EAErD,MAAMC,OAAO,GAAGF,KAAK,CAACG,WAAN,CACZ,MAAOC,IAAP,IAA4C;IACxC;IACA;IACA,IAAIC,MAAM,GAAG,mCAAb;;IAEA,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,IAAN,CACdF,MADc,EAEdD,IAFc,CAAlB;;MAKA,IAAIE,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;QACpB,IAAIF,GAAG,CAACG,IAAJ,CAASC,YAAb,EAA2B,CACvB;UACA;UACA;UACA;UACA;UACA;UACA;UAEA;QACH,CAVD,MAWK,CACD;QACH;MACJ;IACJ,CAtBD,CAsBE,OAAOC,CAAP,EAAe;MACb;MACA;MACAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,CAArB;IACH,CA/BuC,CAgCxC;;;IACA,OAAOG,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;EACH,CAnCW,EAoCZ,EApCY,CAAhB;EAwCA,MAAMC,QAAQ,GAAGhB,KAAK,CAACG,WAAN,CACb,MAAOC,IAAP,IAA4C;IACxC;IACA;IACA,IAAIC,MAAM,GAAG,mCAAb;;IAEA,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,IAAN,CACdF,MADc,EAEdD,IAFc,CAAlB;;MAKA,IAAIE,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;QACpB,IAAIF,GAAG,CAACG,IAAJ,CAASC,YAAb,EAA2B,CACvB;UACA;UACA;UACA;UACA;UACA;UACA;UAEA;QACH,CAVD,MAWK,CACD;QACH;MACJ;IACJ,CAtBD,CAsBE,OAAOC,CAAP,EAAe;MACb;MACA;MACAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,CAArB;IACH,CA/BuC,CAgCxC;;;IACA,OAAOG,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;EACH,CAnCY,EAoCb,EApCa,CAAjB;EAuCA,OAAO;IACHb,OADG;IAEHc;EAFG,CAAP;AAOH;;GAxFuBf,8B"},"metadata":{},"sourceType":"module"}