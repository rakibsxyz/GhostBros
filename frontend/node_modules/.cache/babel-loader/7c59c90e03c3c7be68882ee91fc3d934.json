{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React from 'react';\nimport { useNavigate } from \"react-router-dom\";\nexport default function useFunctionalityAuthentication() {\n  _s();\n\n  const navigate = useNavigate();\n  const onLogin = React.useCallback(async form => {\n    // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\n    // btnLoading.start?.();\n    let apiUrl = \"http://localhost:3333/auth/signin\";\n\n    try {\n      const res = await axios.post(apiUrl, form);\n\n      if (res.data.access_token) {\n        navigate({\n          pathname: \"http://localhost:3333/movie\"\n        }); // StorageAuth.AccessToken = res.data.data.token;\n        // batch(() => {\n        //     dispatch(ActionAuth.SetIsLoggedIn(true));\n        //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\n        //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\n        //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\n        // });\n        // if (!!data.previousPath) history.push(data.previousPath);\n      } else {// toast.error(res.data.message);\n      }\n    } catch (e) {\n      // setErrMsg((e as Error).message);\n      // toast.error(e.message);\n      console.log(\"error\", e);\n    } // btnLoading.stop?.();\n\n\n    return Promise.resolve(null);\n  }, []);\n  const onSignUp = React.useCallback(async form => {\n    // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\n    // btnLoading.start?.();\n    let apiUrl = \"http://localhost:3333/auth/signup\";\n\n    try {\n      const res = await axios.post(apiUrl, form);\n\n      if (res.status === 201) {\n        if (res.data.access_token) {// StorageAuth.AccessToken = res.data.data.token;\n          // batch(() => {\n          //     dispatch(ActionAuth.SetIsLoggedIn(true));\n          //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\n          //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\n          //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\n          // });\n          // if (!!data.previousPath) history.push(data.previousPath);\n        } else {// toast.error(res.data.message);\n        }\n      }\n    } catch (e) {\n      // setErrMsg((e as Error).message);\n      // toast.error(e.message);\n      console.log(\"error\", e);\n    } // btnLoading.stop?.();\n\n\n    return Promise.resolve(null);\n  }, []);\n  return {\n    onLogin,\n    onSignUp\n  };\n}\n\n_s(useFunctionalityAuthentication, \"qe8NF5MO90TuqGREvYGDdeSCViY=\", false, function () {\n  return [useNavigate];\n});\n\nfunction useHistory() {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"names":["axios","React","useNavigate","useFunctionalityAuthentication","navigate","onLogin","useCallback","form","apiUrl","res","post","data","access_token","pathname","e","console","log","Promise","resolve","onSignUp","status","useHistory","Error"],"sources":["C:/Users/USER/AbabaTask/frontend/src/hooks/functionalityAuthentication.tsx"],"sourcesContent":["import axios from 'axios';\r\nimport React from 'react'\r\nimport { ApiLoginResponse, loginSchema } from '../Features/Login/login';\r\nimport { useNavigate , useLocation } from \"react-router-dom\";\r\n\r\nexport default function useFunctionalityAuthentication() {\r\n    const navigate  = useNavigate ();\r\n\r\n    const onLogin = React.useCallback(\r\n        async (form: loginSchema): Promise<null> => {\r\n            // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\r\n            // btnLoading.start?.();\r\n            let apiUrl = \"http://localhost:3333/auth/signin\"\r\n\r\n            try {\r\n                const res = await axios.post<ApiLoginResponse>(\r\n                    apiUrl,\r\n                    form\r\n                );\r\n\r\n                \r\n                    if (res.data.access_token) { \r\n                        navigate({\r\n                            pathname:\"http://localhost:3333/movie\" ,\r\n                          });\r\n                        // StorageAuth.AccessToken = res.data.data.token;\r\n                        // batch(() => {\r\n                        //     dispatch(ActionAuth.SetIsLoggedIn(true));\r\n                        //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\r\n                        //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\r\n                        //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\r\n                        // });\r\n\r\n                        // if (!!data.previousPath) history.push(data.previousPath);\r\n                    }\r\n                    else {\r\n                        // toast.error(res.data.message);\r\n                    }\r\n                \r\n            } catch (e: any) {\r\n                // setErrMsg((e as Error).message);\r\n                // toast.error(e.message);\r\n                console.log(\"error\", e)\r\n            }\r\n            // btnLoading.stop?.();\r\n            return Promise.resolve(null);\r\n        },\r\n        []\r\n    );\r\n\r\n\r\n    const onSignUp = React.useCallback(\r\n        async (form: loginSchema): Promise<null> => {\r\n            // const btnLoading = UtilsJQuery.Ladda(\".login-form-submit-btn\");\r\n            // btnLoading.start?.();\r\n            let apiUrl = \"http://localhost:3333/auth/signup\"\r\n\r\n            try {\r\n                const res = await axios.post<ApiLoginResponse>(\r\n                    apiUrl,\r\n                    form\r\n                );\r\n\r\n                if (res.status === 201) {\r\n                    if (res.data.access_token) {\r\n                        // StorageAuth.AccessToken = res.data.data.token;\r\n                        // batch(() => {\r\n                        //     dispatch(ActionAuth.SetIsLoggedIn(true));\r\n                        //     dispatch(ActionAuth.SetSessionId(res.data.data.sessionId));\r\n                        //     dispatch(ActionAuth.SetProfileData(res.data.data.profile));\r\n                        //     //dispatch(ActionAuth.SetMenuSettingsData(res.data.menuSettings));\r\n                        // });\r\n\r\n                        // if (!!data.previousPath) history.push(data.previousPath);\r\n                    }\r\n                    else {\r\n                        // toast.error(res.data.message);\r\n                    }\r\n                }\r\n            } catch (e: any) {\r\n                // setErrMsg((e as Error).message);\r\n                // toast.error(e.message);\r\n                console.log(\"error\", e)\r\n            }\r\n            // btnLoading.stop?.();\r\n            return Promise.resolve(null);\r\n        },\r\n        []\r\n    );\r\n\r\n    return {\r\n        onLogin,\r\n        onSignUp,\r\n\r\n    }\r\n\r\n\r\n}\r\nfunction useHistory() {\r\n    throw new Error('Function not implemented.');\r\n}\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,WAAT,QAA0C,kBAA1C;AAEA,eAAe,SAASC,8BAAT,GAA0C;EAAA;;EACrD,MAAMC,QAAQ,GAAIF,WAAW,EAA7B;EAEA,MAAMG,OAAO,GAAGJ,KAAK,CAACK,WAAN,CACZ,MAAOC,IAAP,IAA4C;IACxC;IACA;IACA,IAAIC,MAAM,GAAG,mCAAb;;IAEA,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMT,KAAK,CAACU,IAAN,CACdF,MADc,EAEdD,IAFc,CAAlB;;MAMI,IAAIE,GAAG,CAACE,IAAJ,CAASC,YAAb,EAA2B;QACvBR,QAAQ,CAAC;UACLS,QAAQ,EAAC;QADJ,CAAD,CAAR,CADuB,CAIvB;QACA;QACA;QACA;QACA;QACA;QACA;QAEA;MACH,CAbD,MAcK,CACD;MACH;IAER,CAzBD,CAyBE,OAAOC,CAAP,EAAe;MACb;MACA;MACAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,CAArB;IACH,CAlCuC,CAmCxC;;;IACA,OAAOG,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;EACH,CAtCW,EAuCZ,EAvCY,CAAhB;EA2CA,MAAMC,QAAQ,GAAGlB,KAAK,CAACK,WAAN,CACb,MAAOC,IAAP,IAA4C;IACxC;IACA;IACA,IAAIC,MAAM,GAAG,mCAAb;;IAEA,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMT,KAAK,CAACU,IAAN,CACdF,MADc,EAEdD,IAFc,CAAlB;;MAKA,IAAIE,GAAG,CAACW,MAAJ,KAAe,GAAnB,EAAwB;QACpB,IAAIX,GAAG,CAACE,IAAJ,CAASC,YAAb,EAA2B,CACvB;UACA;UACA;UACA;UACA;UACA;UACA;UAEA;QACH,CAVD,MAWK,CACD;QACH;MACJ;IACJ,CAtBD,CAsBE,OAAOE,CAAP,EAAe;MACb;MACA;MACAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,CAArB;IACH,CA/BuC,CAgCxC;;;IACA,OAAOG,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;EACH,CAnCY,EAoCb,EApCa,CAAjB;EAuCA,OAAO;IACHb,OADG;IAEHc;EAFG,CAAP;AAOH;;GA5FuBhB,8B;UACFD,W;;;AA4FtB,SAASmB,UAAT,GAAsB;EAClB,MAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;AACH"},"metadata":{},"sourceType":"module"}